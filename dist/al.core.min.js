/**
 * AlightUI 0.0.1
 * 2016-01-30, (c) 2016 Fábio Nogueira
 * Released under the MIT License.
 * Full source at https://github.com/fabionogueira/alight-ui
*/
var al={};alight.autostart=!1,alight.directives.ng=alight.directives.al,alight.directives.ui={},function(){function e(e,t,n){var r,i=this.$_observable_listeners[e];if(i)for(t=f$.isArray(t)?t:[t],r=0;r<i.length;r++)i[r].apply(n||this.$_observable_context||this,t)}function t(e,t){var n=this.$_observable_listeners;return n[e]||(n[e]=[]),n[e].push(t),this.$_observable_context||this}al.observable=function(n,r){return n.$_observable_listeners||(n.$_observable_listeners={},n.$_observable_context=r,n.emit=e,n.on=t),n}}(),function(){function e(e,r){var i,a,s,o,l="$"+e;if(r.$system.__models[e])return r.$system.__models[e];o={},s=f$.isFunction(n[e])?al.injector(r,n[e]):n[e],s.$static||(s=alight.utils.clone(s));for(i in s.fields)a=s.fields[i],a.name=i,a.validator=t(a),o[i]=void 0===a.value?null:a.value;return r[l]=o,s.setData=function(e){var t;for(t in this.fields)o[t]=e[t];return r.$scan(),this},s.getData=function(){var e,t={};for(e in this.fields)t[e]=o[e];return t},s.setValue=function(e,t){return this.fields[e]&&(o[e]=t),r.$scan(),this},r.$system.__models[e]=s=al.observable(s),s}function t(e){var t,n,r,i={};if(i.type=e.type,e.validator)for(r=e.validator.split("|"),t=0;t<r.length;t++)n=r[t].split(":"),i[n[0]]=n[1];return i}var n,r,i,a,s,o,l;n={},r={},a={},i={},s={},o={},l=/((\/\/.*$)|(\/\*[\s\S]*?\*\/)| )/gm,al.controller=function(e,t){return t?(r[e]=t,this):r[e]},al.service=function(e,t){return t?(i[e]=al.observable(t()),this):i[e]},al.factory=function(e,t){return t?a[e]&&t.$system?(t.$system.__factories[e]||(t.$system.__factories[e]=new a[e](t)),t.$system.__factories[e]):"function"==typeof t?(a[e]=t,this):null:null},al.injector=function(e,t){function n(e,t){var r,i,a,s=null;if(f$.isArray(t)){for(i=[],r=0;r<t.length;r++)a=n(e,t[r]),a&&i.push(a);return i}return s="$scope"===t?e:al.controller(t)||al.service(t)||al.factory(t,e)||al.model(t,e)||null}var r,i;return r=t.toString().split("(")[1].split(")")[0].replace(l,"").split(","),i=n(e,r),t.apply(e,i)},al.model=function(t,r){var i,a;return r?(i=r.$system?r:null,a=r,n[t]&&i?i.$system.__models?e(t,i):null:(n[t]=a,al)):null},f$.ready(function(){var e=document.getElementsByTagName("app")[0];e&&(al.appElement=e,al.service("ModuleService").load("main",{view:e,controller:"indexController"}))})}(),al.ui={},al.ui.register=function(e,t){alight.directives.ui[e]={restrict:"A",init:function(e,n,r,i){var a,s,o=al.__processingModuleScope;return s=al.ui.propertiesToJson(e),t.defaults&&(s=$.extend({},t.defaults,s)),a=this.create(e,s),o&&n&&(a.$element=e,o.$Component[n]=a),t.owner!==!1?{owner:!0}:void 0},create:function(e,n,r,i,a){return al.observable(t.create(n,e,r,a),i)}}},al.ui.propertiesToJson=function(e){var t,n,r={},i=e.getAttribute("properties");if(i)try{r=JSON.parse(i)}catch(a){r={}}else if(n=e.children[0],n&&"properties"===n.localName)for(i=n.attributes,t=0;t<i.length;t++)r[i[t].name]=i[t].value;if(e.$properties){for(t in e.$properties)r[t]=e.$properties[t];delete e.$properties}return r},al.ui.compileTemplate=function(e,t){var n,r,i,a="",s="";for(r=e.split("}}"),n=0;n<r.length;n++)i=r[n].split("{{"),s+=2===i.length?a+"'"+i[0]+"'+("+i[1]+")":a+"'"+i[0]+"'",a="+";return t=t||[],t=t.concat("return "+s+";"),Function.apply(null,t)},al.ui.getTemplate=function(e){for(var t,n,r=0;r<e.childNodes.length;r++)if(t=e.childNodes[r],"#comment"===t.nodeName&&"@template"===t.nodeValue.substring(0,9))return n=t.nodeValue.replace("@template","").replace(/\t/g,"").replace(/\n/g,"").replace(/  /g," ").trim();return""},function(){function e(){var e,r;for(e=0;e<t.length;e++)if(r=t[e],r.__visible__)return r;return r=document.createElement("div"),r.className="modal-dialog",r.innerHTML='<div class="alert alert-danger" style="min-height:50px"><button type="button" class="close" onclick="this.parentNode.parentNode.close()"><span>×</span></button><div></div></div>',r.__backdrop=document.createElement("div"),r.__popup__=r.firstChild,r.__close__=r.firstChild.childNodes[0],r.__content__=r.firstChild.childNodes[1],r.__effect__="fade",r.close=function(){var e=this;e.__backdrop.className="modal-backdrop fade out",e.className="modal-dialog "+e.__effect__+" out",setTimeout(function(){e.__visible__=!1,e.__parent.removeChild(e.__backdrop),e.__parent.removeChild(e),e.__parent=null},1e3)},r.show=function(e){var t=this;t.style.zIndex=n++,t.style.display="block",t.__visible__=!0,t.className="modal-dialog "+t.__effect__,t.__backdrop.className="modal-backdrop fade",t.__parent=e,e.appendChild(t.__backdrop),e.appendChild(this),setTimeout(function(){t.className="modal-dialog "+t.__effect__+" in",t.__backdrop.className="modal-backdrop fade in"},1)},t.push(r),r}var t=[],n=1060;al.ui.alert=function(){var t,n;t=f$.isObject(arguments[0])?arguments[0]:{message:arguments[0],buttons:f$.isArray(arguments[1])?arguments[1]:null,callback:f$.isFunction(arguments[1])?arguments[1]:f$.isFunction(arguments[2])?arguments[2]:null},t.type=t.type||"warning",t.effect=t.effect||"fade",n=e(),n.__effect__=t.effect,n.__popup__.className="alert alert-"+t.type,n.__content__.innerHTML=t.message,n.show(t.parent||document.body)}}(),function(){al.service("HttpService",function(){function e(e,r,a,s){a=a||n,i.onRequest(r),$.ajax({type:s,url:i.baseUrl+e,data:r,success:function(e){t(e,200!==e.status,a)},error:function(e){t(e,!0,a)}})}function t(e,t,n){i.onResponse(e,t),n(e,t),r.emit(t?"error":"success",[e])}function n(){}var r,i={baseUrl:"",onRequest:function(){},onResponse:function(){}};return r=al.observable({config:function(e){i.baseUrl=e.baseUrl||i.baseUrl,i.onRequest=e.onRequest||i.onRequest,i.onResponse=e.onResponse||i.onResponse},get:function(t,n,r){return e(t,n,r,"GET"),this},post:function(t,n,r){return e(t,n,r,"POST"),this},put:function(t,n,r){return e(t,n,r,"PUT"),this},"delete":function(t,n,r){return e(t,n,r,"DELETE"),this}})})}(),function(){function e(e,t,n){alight.applyBindings(e,n),al.injector(e,t),e.$scan()}function t(e,t){var n;return a[e]?t(e,a[e]):(n=document.createElement("script"),n.type="text/javascript",n.src=e,a[e]="pending",n.onload=n.onreadystatechange=function(){this.complete("success")},n.onerror=function(){this.complete("error"),c.removeChild(this)},n.complete=function(n){this.complete=this.onload=this.onerror=null,a[this.url]=n,t(e,n)},void c.appendChild(n))}function n(e,t){return s[e]?t(e,s[e].status,s[e].html):(s[e]={status:"pending",html:""},void $.get(e).done(function(n){s[e].status="success",s[e].html=n,t(e,"success",n)}).fail(function(){s[e].status="error",t(e,"error","")}))}function r(e,r){function i(e,t,n){c[e]={type:o[l],data:n,status:t},l--,0===l&&r(c)}var a,s,o={},l=0,c={};if(0===e.length)return r(c);for(a=0;a<e.length;a++)s=e[a],o[l]=s.indexOf(".js")>0?"js":"html",l++,("js"===o[l-1]?t:n)(s,i)}var i={},a={},s={},o={base:""},l={},c=document.getElementsByTagName("head")[0];al.service("ModuleService",function(){var t={config:function(e){return o=e,this},register:function(e,t){return t?(t.name=e,l[e]=t,this):l[e]},load:function(t,n,a){var s,o;return f$.isFunction(n)&&(a=n,n=l[t]),i[t]?a(i[t]):(s=document.createElement("div"),o=[],n.viewUrl&&o.push(n.viewUrl),n.imports&&(o=o.concat(n.imports)),n.onStartLoad&&n.onStartLoad(),r(o,function(r){var o,l=al.controller(n.controller);if(n.view||(o=r[n.viewUrl]?r[n.viewUrl].data:null,o&&(s.innerHTML=o,n.view=s.firstChild)),n.view)if(l){var c=alight.Scope();c.$system.__factories={},c.$system.__models={},al.__processingModuleScope=c,al.__processingModuleView=n.view,c.$Component={},e(c,l,n.view)}else n.scope&&(al.__processingModuleScope=n.scope,al.__processingModuleView=n.view,alight.applyBindings(n.scope,n.view));i[t]=n,a&&(n.onLoaded?(n.onLoaded(),setTimeout(a,600)):a())}),this)}};return t})}(),function(){al.service("ValidatorService",function(){function e(e,t,n){var r,i,a;i="message_"+n.type,r=n["validatorMessage_"+t.name]||n["validatorMessage_"+t.name+"_"+n.type]||t[i]||t.message;for(a in n)r=r.replace("{"+a+"}",n[a]);r=r.replace("{label}",n.name);for(a in n.validator)r=r.replace("{"+a+"}",n.validator[a]);return r.replace("{value}",e)}var t={};return{create:function(e,n){return n.init=n.init||function(){},n.name=e,t[e]=n,this},getValidator:function(e){return t[e]},checkValue:function(n,r){var i,a,s,o,l=[];r=r||{},i=r.validator;for(o in i)(""!==n&&null!==n&&void 0!==n||"required"===o)&&(a=t["type"===o?i[o]:o],a&&(s=a.check(n,i),s!==!0&&l.push(e(n,a,r))));return l}}}),ENV.validators||(ENV.validators={}),al.service("ValidatorService").create("string",{message:ENV.validators.string_message||"String data type error",check:function(e){return null===e||"string"==typeof e?!0:!1},init:function(e,t){t.mask&&alight.directives.ng.mask.init(e,t.mask)}}).create("integer",{message:ENV.validators.integer_message||"Integer data type error",check:function(e){return!isNaN(Number(e))}}).create("date",{message:ENV.validators.date_message||"Data type error",check:function(e){return moment(e,["DD/MM/YYYY"],!0).isValid()},init:function(e,t){alight.directives.ui.datepicker.create(e),t.mask&&alight.directives.ng.mask.init(e,t.mask)}}).create("cpf",{message:"",check:function(e){var t,n,r;if(e=e.replace(/\.|\-|\s/g,""),n=0,"00000000000"===e)return!1;for(t=1;9>=t;t++)n+=parseInt(e.substring(t-1,t))*(11-t);if(r=10*n%11,(10===r||11===r)&&(r=0),r!==parseInt(e.substring(9,10)))return!1;for(n=0,t=1;10>=t;t++)n+=parseInt(e.substring(t-1,t))*(12-t);return r=10*n%11,(10===r||11===r)&&(r=0),r!==parseInt(e.substring(10,11))?!1:!0},init:function(e){alight.directives.ng.mask.init(e,"000.000.000-00")}}).create("required",{message:ENV.validators.required_message||"Field is required",check:function(e){return!(""===e||null===e||void 0===e)}}).create("email",{message:ENV.validators.email_message||"Invalidate email",check:function(e,t){var n=/^[a-z0-9\u007F-\uffff!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9\u007F-\uffff!#$%&'*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z]{2,}$/i;return n.exec(e)?!0:!1}}).create("max",{message:ENV.validators.max_message||"The value {value} invalid, max value is {max}",message_string:ENV.validators.max_message_string||"The maximum length is {max}",check:function(e,t){return 1*e<=1*t.max}}).create("min",{message:ENV.validators.min_message||"The value {value} invalid, min value is {min}",message_string:ENV.validators.min_message_string||"The minimum length is {min}",check:function(e,t){var n=1*t.min;return"string"===t.type?e.length>=n:1*e>=n}}).create("size",{init:function(e,t){e.maxLength=t.size}})}(),function(){var e=al.service("HttpService");al.factory("HttpFactory",function(t){function n(t,n,a,s){"http"!==t.split(":")[0]&&(t=i.baseUrl+t),a=a||$.noop(),i.onRequest(n,t,s),e[s](t,n,function(e,n){r(t,s,e,n,a)})}function r(n,r,a,s,o){i.onResponse(a,s,n,r),o(a,s),e.emit(s?"error":"success",[a]),t.$scan()}var i={baseUrl:"",onRequest:function(){},onResponse:function(){}};return al.observable({config:function(e){i.baseUrl=e.baseUrl||i.baseUrl,i.onRequest=e.onRequest||i.onRequest,i.onResponse=e.onResponse||i.onResponse},get:function(e,t,r){return n(e,t,r,"get"),this},post:function(e,t,r){return n(e,t,r,"post"),this},put:function(e,t,r){return n(e,t,r,"put"),this},"delete":function(e,t,r){return n(e,t,r,"delete"),this}},t)})}();