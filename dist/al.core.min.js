var al={};alight.autostart=!1,alight.directives.ng=alight.directives.al,alight.directives.ui={},function(){function e(e,t,n){var i,r=this.$_observable_listeners[e];if(r)for(t=f$.isArray(t)?t:[t],i=0;i<r.length;i++)r[i].apply(n||this.$_observable_context||this,t)}function t(e,t){var n=this.$_observable_listeners;return n[e]||(n[e]=[]),n[e].push(t),this.$_observable_context||this}al.observable=function(n,i){return n.$_observable_listeners||(n.$_observable_listeners={},n.$_observable_context=i,n.emit=e,n.on=t),n}}(),function(){function e(e,i){var r,a,o,s,l="$"+e;if(i.$system.__models[e])return i.$system.__models[e];s={},o=f$.isFunction(n[e])?al.injector(i,n[e]):n[e],o.$static||(o=alight.utils.clone(o));for(r in o.fields)a=o.fields[r],a.name=r,a.validator=t(a),s[r]=void 0===a.value?null:a.value;return i[l]=s,o.setData=function(e){var t;for(t in this.fields)s[t]=e[t];return i.$scan(),this},o.getData=function(){var e,t={};for(e in this.fields)t[e]=s[e];return t},o.setValue=function(e,t){return this.fields[e]&&(s[e]=t),i.$scan(),this},i.$system.__models[e]=o=al.observable(o),o}function t(e){var t,n,i,r={};if(r.type=e.type,e.validator)for(i=e.validator.split("|"),t=0;t<i.length;t++)n=i[t].split(":"),r[n[0]]=n[1];return r}var n,i,r,a,o,s,l;n={},i={},a={},r={},o={},s={},l=/((\/\/.*$)|(\/\*[\s\S]*?\*\/)| )/gm,al.controller=function(e,t){return t?(i[e]=t,this):i[e]},al.service=function(e,t){return t?(r[e]=al.observable(t()),this):r[e]},al.factory=function(e,t){return t?a[e]&&t.$system?(t.$system.__factories[e]||(t.$system.__factories[e]=new a[e](t)),t.$system.__factories[e]):"function"==typeof t?(a[e]=t,this):null:null},al.injector=function(e,t){function n(e,t){var i,r,a,o=null;if(f$.isArray(t)){for(r=[],i=0;i<t.length;i++)a=n(e,t[i]),a&&r.push(a);return r}return o="$scope"===t?e:al.controller(t)||al.service(t)||al.factory(t,e)||al.model(t,e)||null}var i,r;return i=t.toString().split("(")[1].split(")")[0].replace(l,"").split(","),r=n(e,i),t.apply(e,r)},al.model=function(t,i){var r,a;return i?(r=i.$system?i:null,a=i,n[t]&&r?r.$system.__models?e(t,r):null:(n[t]=a,al)):null},f$.ready(function(){var e=document.getElementsByTagName("app")[0];e&&(al.appElement=e,al.service("ModuleService").load("main",{view:e,controller:"indexController"}))})}(),al.ui={},al.ui.register=function(e,t){alight.directives.ui[e]={restrict:"A",init:function(e,n,i,r){var a,o,s=al.__processingModuleScope;return o=al.ui.propertiesToJson(e),t.defaults&&(o=$.extend({},t.defaults,o)),a=this.create(e,o),s&&n&&(a.$element=e,s.$Component[n]=a),t.owner!==!1?{owner:!0}:void 0},create:function(e,n,i,r,a){return al.observable(t.create(n,e,i,a),r)}}},al.ui.propertiesToJson=function(e){var t,n,i={},r=e.getAttribute("properties");if(r)try{i=JSON.parse(r)}catch(a){i={}}else if(n=e.children[0],n&&"properties"===n.localName)for(r=n.attributes,t=0;t<r.length;t++)i[r[t].name]=r[t].value;if(e.$properties){for(t in e.$properties)i[t]=e.$properties[t];delete e.$properties}return i},al.ui.compileTemplate=function(e,t){var n,i,r,a="",o="";for(i=e.split("}}"),n=0;n<i.length;n++)r=i[n].split("{{"),o+=2===r.length?a+"'"+r[0]+"'+("+r[1]+")":a+"'"+r[0]+"'",a="+";return t=t||[],t=t.concat("return "+o+";"),Function.apply(null,t)},al.ui.getTemplate=function(e){for(var t,n,i=0;i<e.childNodes.length;i++)if(t=e.childNodes[i],"#comment"===t.nodeName&&"@template"===t.nodeValue.substring(0,9))return n=t.nodeValue.replace("@template","").replace(/\t/g,"").replace(/\n/g,"").replace(/  /g," ").trim();return""},function(){al.service("HttpService",function(){function e(e,i,a,o){a=a||n,r.onRequest(i),$.ajax({type:o,url:r.baseUrl+e,data:i,success:function(e){t(e,200!==e.status,a)},error:function(e){t(e,!0,a)}})}function t(e,t,n){r.onResponse(e,t),n(e,t),i.emit(t?"error":"success",[e])}function n(){}var i,r={baseUrl:"",onRequest:function(){},onResponse:function(){}};return i=al.observable({config:function(e){r.baseUrl=e.baseUrl||r.baseUrl,r.onRequest=e.onRequest||r.onRequest,r.onResponse=e.onResponse||r.onResponse},get:function(t,n,i){return e(t,n,i,"GET"),this},post:function(t,n,i){return e(t,n,i,"POST"),this},put:function(t,n,i){return e(t,n,i,"PUT"),this},"delete":function(t,n,i){return e(t,n,i,"DELETE"),this}})})}(),function(){function e(e,t,n){alight.applyBindings(e,n),al.injector(e,t),e.$scan()}function t(e,t){var n;return a[e]?t(e,a[e]):(n=document.createElement("script"),n.type="text/javascript",n.src=e,a[e]="pending",n.onload=n.onreadystatechange=function(){this.complete("success")},n.onerror=function(){this.complete("error"),u.removeChild(this)},n.complete=function(n){this.complete=this.onload=this.onerror=null,a[this.url]=n,t(e,n)},void u.appendChild(n))}function n(e,t){return o[e]?t(e,o[e].status,o[e].html):(o[e]={status:"pending",html:""},void $.get(e).done(function(n){o[e].status="success",o[e].html=n,t(e,"success",n)}).fail(function(){o[e].status="error",t(e,"error","")}))}function i(e,i){function r(e,t,n){u[e]={type:s[l],data:n,status:t},l--,0===l&&i(u)}var a,o,s={},l=0,u={};if(0===e.length)return i(u);for(a=0;a<e.length;a++)o=e[a],s[l]=o.indexOf(".js")>0?"js":"html",l++,("js"===s[l-1]?t:n)(o,r)}var r={},a={},o={},s={base:""},l={},u=document.getElementsByTagName("head")[0];al.service("ModuleService",function(){var t={config:function(e){return s=e,this},register:function(e,t){return t?(t.name=e,l[e]=t,this):l[e]},load:function(t,n,a){var o,s;return f$.isFunction(n)&&(a=n,n=l[t]),r[t]?a(r[t]):(o=document.createElement("div"),s=[],n.viewUrl&&s.push(n.viewUrl),n.imports&&(s=s.concat(n.imports)),n.onStartLoad&&n.onStartLoad(),i(s,function(i){var s,l=al.controller(n.controller);if(n.view||(s=i[n.viewUrl]?i[n.viewUrl].data:null,s&&(o.innerHTML=s,n.view=o.firstChild)),n.view)if(l){var u=alight.Scope();u.$system.__factories={},u.$system.__models={},al.__processingModuleScope=u,al.__processingModuleView=n.view,u.$Component={},e(u,l,n.view)}else n.scope&&(al.__processingModuleScope=n.scope,al.__processingModuleView=n.view,alight.applyBindings(n.scope,n.view));r[t]=n,a&&(n.onLoaded?(n.onLoaded(),setTimeout(a,600)):a())}),this)}};return t})}(),function(){al.service("ValidatorService",function(){function e(e,t,n){var i,r,a;r="message_"+n.type,i=n["validatorMessage_"+t.name]||n["validatorMessage_"+t.name+"_"+n.type]||t[r]||t.message;for(a in n)i=i.replace("{"+a+"}",n[a]);i=i.replace("{label}",n.name);for(a in n.validator)i=i.replace("{"+a+"}",n.validator[a]);return i.replace("{value}",e)}var t={};return{create:function(e,n){return n.init=n.init||function(){},n.name=e,t[e]=n,this},getValidator:function(e){return t[e]},checkValue:function(n,i){var r,a,o,s,l=[];i=i||{},r=i.validator;for(s in r)(""!==n&&null!==n&&void 0!==n||"required"===s)&&(a=t["type"===s?r[s]:s],a&&(o=a.check(n,r),o!==!0&&l.push(e(n,a,i))));return l}}}),ENV.validators||(ENV.validators={}),al.service("ValidatorService").create("string",{message:ENV.validators.string_message||"String data type error",check:function(e){return null===e||"string"==typeof e?!0:!1},init:function(e,t){t.mask&&alight.directives.ng.mask.init(e,t.mask)}}).create("integer",{message:ENV.validators.integer_message||"Integer data type error",check:function(e){return!isNaN(Number(e))}}).create("date",{message:ENV.validators.date_message||"Data type error",check:function(e){return moment(e,["DD/MM/YYYY"],!0).isValid()},init:function(e,t){alight.directives.ui.datepicker.create(e),t.mask&&alight.directives.ng.mask.init(e,t.mask)}}).create("cpf",{message:"",check:function(e){var t,n,i;if(e=e.replace(/\.|\-|\s/g,""),n=0,"00000000000"===e)return!1;for(t=1;9>=t;t++)n+=parseInt(e.substring(t-1,t))*(11-t);if(i=10*n%11,(10===i||11===i)&&(i=0),i!==parseInt(e.substring(9,10)))return!1;for(n=0,t=1;10>=t;t++)n+=parseInt(e.substring(t-1,t))*(12-t);return i=10*n%11,(10===i||11===i)&&(i=0),i!==parseInt(e.substring(10,11))?!1:!0},init:function(e){alight.directives.ng.mask.init(e,"000.000.000-00")}}).create("required",{message:ENV.validators.required_message||"Field is required",check:function(e){return!(""===e||null===e||void 0===e)}}).create("email",{message:ENV.validators.email_message||"Invalidate email",check:function(e,t){var n=/^[a-z0-9\u007F-\uffff!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9\u007F-\uffff!#$%&'*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z]{2,}$/i;return n.exec(e)?!0:!1}}).create("max",{message:ENV.validators.max_message||"The value {value} invalid, max value is {max}",message_string:ENV.validators.max_message_string||"The maximum length is {max}",check:function(e,t){return 1*e<=1*t.max}}).create("min",{message:ENV.validators.min_message||"The value {value} invalid, min value is {min}",message_string:ENV.validators.min_message_string||"The minimum length is {min}",check:function(e,t){var n=1*t.min;return"string"===t.type?e.length>=n:1*e>=n}}).create("size",{init:function(e,t){e.maxLength=t.size}})}(),function(){var e=al.service("HttpService");al.factory("HttpFactory",function(t){function n(t,n,a,o){"http"!==t.split(":")[0]&&(t=r.baseUrl+t),a=a||$.noop(),r.onRequest(n,t,o),e[o](t,n,function(e,n){i(t,o,e,n,a)})}function i(n,i,a,o,s){r.onResponse(a,o,n,i),s(a,o),e.emit(o?"error":"success",[a]),t.$scan()}var r={baseUrl:"",onRequest:function(){},onResponse:function(){}};return al.observable({config:function(e){r.baseUrl=e.baseUrl||r.baseUrl,r.onRequest=e.onRequest||r.onRequest,r.onResponse=e.onResponse||r.onResponse},get:function(e,t,i){return n(e,t,i,"get"),this},post:function(e,t,i){return n(e,t,i,"post"),this},put:function(e,t,i){return n(e,t,i,"put"),this},"delete":function(e,t,i){return n(e,t,i,"delete"),this}},t)})}(),alight.directives.al.name={restrict:"A",init:function(e,t,n){return n.$Component[t]=e,{}}},alight.directives.al.disabled={init:function(e,t,n,i){var r,a,o,s,l;return o=null,r=null,a=null,s=null,l={start:function(){return l.watchModel(),l.initUpdate()},updateDom:function(t){t===!1?e.removeAttribute("disabled"):e.setAttribute("disabled","disabled")},watchModel:function(){var e;return e=n.$watch(t,l.updateDom,{readOnly:!0}),s=e.value},initUpdate:function(){return l.updateDom(s)}}}},alight.directives.al.hide={init:function(e,t,n,i){var r,a,o,s,l;return o=null,r=null,a=null,s=null,l={start:function(){return l.watchModel(),l.initUpdate()},updateDom:function(t){t===!1?e.removeAttribute("hidden"):e.setAttribute("hidden","true")},watchModel:function(){var e;return e=n.$watch(t,l.updateDom,{display:"none"}),s=e.value},initUpdate:function(){return l.updateDom(s)}}}},function(){var e={};alight.directives.al.includeCache=function(){var t=alight.directives.al.include.init.apply(null,arguments);return t.loadHtml=function(t){var n=e[t.url];n||(e[t.url]=n=$.get(t.url)),t.success&&n.done(t.success),t.error&&n.fail(t.error)},t}}(),alight.directives.al.module={priority:100,init:function(e,t,n,i){var r,a,o,s,l;return o=null,r=null,a=null,s=null,l={owner:!0,topElement:null,start:function(){return l.watchModel(),l.initUpdate()},insertModule:function(t){r&&f$.remove(r),r=t.view,o=t.scope,e.appendChild(r)},updateDom:function(e){return e?(e.scope=e.scope||n,void al.service("ModuleService").load(e.name,e,l.insertModule)):void(r&&f$.remove(r))},watchModel:function(){var e;return e=n.$watch(t,l.updateDom,{readOnly:!0}),s=e.value},initUpdate:function(){return l.updateDom(s)}}}},function(){function e(e,t){var n;e&&(n=i.getValidator(e.type),n&&n.init(t,e),e.size&&i.getValidator("size").init(t,e))}function t(e,t,n){var r,a,o=!0,s="new";for(r in t)e.fields[r]&&(a=i.checkValue(t[r],e.fields[r]),e.fields[r].key&&t[r]&&(s="edit"),0===a.length?n(r):(o=!1,n(r,a)));return[o,s]}function n(e,t,n,i){var r,a=t.$system;a.__modelErrorDirectiveElements&&(a.__modelErrorDirectiveElements[n]?r=a.__modelErrorDirectiveElements[n]:a.__modelErrorDirectiveElements[n]=e),i?(e.setAttribute(alight.directives.al.modelError.ATTR_MODEL_ERROR,i.join("|")),r&&(r.innerHTML=i.join("|"))):(e.removeAttribute(alight.directives.al.modelError.ATTR_MODEL_ERROR),r&&(r.innerHTML=""))}var i=al.service("ValidatorService");alight.directives.al.model=function(i,r,a){var o,s,l,u,c,d;return a.$system.__modelErrorDirectiveElements||(a.$system.__modelErrorDirectiveElements={}),(i.type||"SELECT"===i.nodeName||"TEXTAREA"===i.nodeName)&&(d="radio"===i.type?alight.directives.al.radio.init.apply(null,arguments):"checkbox"===i.type?alight.directives.al.checked.init.apply(null,arguments):alight.directives.al.value.apply(null,arguments),d.updateDom_=d.updateDom,d.updateDom=function(e){return d.fieldChanged(e),d.updateDom_(e)}),d.fieldChanged=function(e,o){var l;return d.changing_?void(d.changing_=!1):(a[u][c]=e,l=t(s,a[u],function(e,t){e===c&&n(i,a,r,t)}),a[u].$VALIDATE=l[0],a[u].$EDIT_MODE=l[1],void setTimeout(function(){d.changing_=!0,a.$scan(function(){d.changing_=!1})},10))},$(i).on("customChange",function(){d.fieldChanged(this.value,!0)}),o=r.split("."),l=o[0].substring(1),c=o[1],s=al.model(l,a),u="$"+l,s&&e(s.fields[c],i),d}}();